<html>
  <head>
    <style>
      .highlight {
        color: red;
        font-weight: 600;
      }

      #above {
        border: 1px solid black;
      }

      #below {
        border: 1px solid black;
      }
    </style>

    <script>
      const getNumberContainer = () =>
        document.querySelector(".numbers-container");

      const createNumberElement = (number) => {
        const element = document.createElement("li");
        element.innerText = number;

        return element;
      };

      const display = ({ element, number }) => {
        if (number < 5) {
          displayBelow(element);
          return;
        }
        displayAbove(element);
      };

      const delayedPrompt = (prmtMsg, cb, timeout = 200) => {
        setTimeout(() => {
          const number = +prompt(prmtMsg);
          cb(number);
        }, timeout);
      };

      const findMaxElement = (numberElements) => {
        return numberElements.reduce((max, current) =>
          max.number < current.number ? current : max
        );
      };

      const highlightMax = (maxElement) =>
        maxElement.classList.add("highlight");

      const findAndHighlightMax = (numberElements) => {
        const max = findMaxElement(numberElements);
        highlightMax(max.element);
      };

      const displayAbove = (element) => {
        const groupName = document.querySelector("#above");
        groupName.appendChild(element);
      };

      const displayBelow = (element) => {
        const groupName = document.querySelector("#below");
        groupName.appendChild(element);
      };

      const collectNumbers = (count, numbers) => {
        if (count === 0) {
          partition(numbers);
          findAndHighlightMax(numbers);
          return;
        }

        delayedPrompt("Enter a number", (number) => {
          const element = createNumberElement(number);
          const numberElement = { element, number };
          display({ element, number });

          collectNumbers(count - 1, [...numbers, numberElement]);
        });
      };

      window.onload = collectNumbers(5, []);
    </script>
  </head>

  <body>
    <ul class="numbers-container"></ul>

    <div id="above">
      <ul></ul>
    </div>

    <div id="below">
      <ul></ul>
    </div>
  </body>
</html>
