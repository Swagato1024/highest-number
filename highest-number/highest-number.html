<html>
  <head>
    <style>
      .highlight {
        background-color: aqua;
      }
    </style>

    <script>
      const getNumberContainer = () =>
        document.querySelector(".numbers-container");

      const createNumberElement = (number) => {
        const element = document.createElement("li");
        element.innerText = number;

        return element;
      };

      const display = (element) => {
        const numberContainer = getNumberContainer();
        numberContainer.appendChild(element);
      };

      const delayedPrompt = (prmtMsg, cb, timeout = 200) => {
        setTimeout(() => {
          const number = +prompt(prmtMsg);
          cb(number);
        }, timeout);
      };

      const findMaxElement = (numberElements) => {
        return numberElements.reduce((max, current) =>
          max.number < current.number ? current : max
        );
      };

      const highlightMax = (maxElement) =>
        maxElement.classList.add("highlight");

      const findAndHighlightMax = (numberElements) => {
        const max = findMaxElement(numberElements);
        highlightMax(max.element);
      };

      const collectNumbers = (count, numbers) => {
        if (count === 0) {
          findAndHighlightMax(numbers);
          return;
        }

        delayedPrompt("Enter a number", (number) => {
          const element = createNumberElement(number);
          const numberElement = { element, number };
          display(element);

          collectNumbers(count - 1, [...numbers, numberElement]);
        });
      };

      window.onload = collectNumbers(5, []);
    </script>
  </head>

  <body>
    <h3>Highest number</h3>
    <ul class="numbers-container"></ul>
  </body>
</html>
